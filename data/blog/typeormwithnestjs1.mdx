---
title: "Getting Started with Nest.js and TypeORM: Part 1"
summary: "An introduction to using TypeORM in a Nest.js application, covering entities and attributes."
date: "Nov 24 2024"
tags: ["nestjs", "javascript", "web development"]
draft: false
---

## Introduction

Nest.js is a powerful framework for building scalable server-side applications using Node.js. One of its strengths is its flexibility in working with databases, and one popular option for managing data in Nest.js is **TypeORM**. TypeORM is an Object-Relational Mapper (ORM) that helps you interact with your database in a more structured, organized way. This three-part series will introduce TypeORM concepts in the context of Nest.js and help you build a solid understanding of entities, services, and controllers.

In **Part 1**, we’ll explore the fundamentals of **entities** and **attributes**—the building blocks of any TypeORM database model in a Nest.js application.

## What is TypeORM?

TypeORM allows developers to define database tables and interactions in terms of JavaScript or TypeScript classes. Instead of manually writing SQL queries, you work with classes and methods, making it easier to manage complex data models.

In TypeORM, a **database table** is represented by an **entity** class, where each column of the table becomes an attribute within that class. This object-oriented approach makes database interactions more intuitive and readable.

## Setting Up Nest.js with TypeORM

To use TypeORM in a Nest.js project, you need to install TypeORM and a database driver. Here’s an example of how to set up TypeORM with a popular database like PostgreSQL.

### Step 1: Install TypeORM and PostgreSQL

Start by installing TypeORM and the PostgreSQL driver:

```bash
npm install @nestjs/typeorm typeorm pg
```

- `@nestjs/typeorm`: The Nest.js integration for TypeORM.
- `typeorm`: The TypeORM library itself.
- `pg`: The PostgreSQL driver (replace with another driver if using a different database).

### Step 2: Configure TypeORM in Your App

In your `app.module.ts`, import `TypeOrmModule` and add it to your `imports` array. You will need to provide connection details, such as the database type, host, port, and credentials.

```typescript
// src/app.module.ts
import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';

@Module({
  imports: [
    TypeOrmModule.forRoot({
      type: 'postgres',
      host: 'localhost',
      port: 5432,
      username: 'your_db_user',
      password: 'your_db_password',
      database: 'your_db_name',
      entities: [__dirname + '/**/*.entity{.ts,.js}'],
      synchronize: true,  // Automatically creates the database tables based on entities. Not recommended for production.
    }),
  ],
})
export class AppModule {}
```

> **Note**: The `synchronize` option will automatically sync your entities with the database, creating tables if they don’t exist. While convenient for development, it’s not recommended for production environments.

## Entities and Attributes

In TypeORM, entities are classes that represent tables in your database. Each attribute in an entity corresponds to a column in the table.

### Creating an Entity

Let’s create an example entity called `User`. In the `src` folder, create a `user.entity.ts` file.

```typescript
// src/user.entity.ts
import { Entity, Column, PrimaryGeneratedColumn } from 'typeorm';

@Entity()
export class User {
  @PrimaryGeneratedColumn()
  id: number;

  @Column()
  username: string;

  @Column()
  email: string;

  @Column()
  age: number;
}
```

### Explanation of the Code

- **@Entity()**: This decorator marks the class as a TypeORM entity, meaning it maps to a database table.
- **@PrimaryGeneratedColumn()**: Defines the primary key column that will be auto-generated by TypeORM.
- **@Column()**: Defines a column in the table. Each property decorated with `@Column()` will become a column in the `User` table.

In this example, `User` has four columns: `id`, `username`, `email`, and `age`. The `id` is a primary key and will be auto-generated, while the other attributes represent basic user data.

## Adding the Entity to TypeORM

For TypeORM to recognize the `User` entity, it needs to be imported into a module. You can add it to the `AppModule` (or a dedicated module if you’re organizing it that way).

```typescript
// src/app.module.ts
import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { User } from './user.entity';

@Module({
  imports: [
    TypeOrmModule.forRoot({
      type: 'postgres',
      host: 'localhost',
      port: 5432,
      username: 'your_db_user',
      password: 'your_db_password',
      database: 'your_db_name',
      entities: [User],
      synchronize: true,
    }),
    TypeOrmModule.forFeature([User]),
  ],
})
export class AppModule {}
```

- **TypeOrmModule.forRoot()**: Configures the TypeORM connection, including the database and the entities.
- **TypeOrmModule.forFeature()**: Registers the `User` entity so that it can be used with TypeORM repositories.

## Conclusion

In this first part, we’ve introduced TypeORM’s role in a Nest.js application and covered the basics of setting up a database connection. We’ve also created an initial entity with attributes that will map to a database table. In **Part 2**, we’ll dive into creating a **service** to handle database operations for this entity, making it easier to work with data in the application.

Stay tuned for Part 2, where we’ll add business logic and services to interact with our `User` entity.
